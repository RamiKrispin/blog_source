---
title: Introduction to the coronavirus package
author: Rami Krispin
date: '2020-03-08'
slug: introduction-to-the-coronavirus-package
categories: []
tags: ["coronavirus", "covid19", "R", "timeseries", "dataset"]
keywords:
  - coronavirus
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.width=8, message=FALSE, warning=FALSE)
```


The [coronavirus](https://ramikrispin.github.io/coronavirus/) R dataset package provides a daily summary for the Coronavirus new cases by geographic location (i.e., country and province/state when applicable), and case type (confirmed, recovered, and death). The raw data pulled from the Johns Hopkins University Center for Systems Science and Engineering (JHU CCSE) Coronavirus [repository](https://github.com/CSSEGISandData/COVID-19).

**Note:** More granular data for the main countries affected by the virus (South Korea, Italy, Iran, etc.) will add to the package in the coming days.


### Installation

You can install the CRAN version (v0.1.0):

``` r
install.packages("coronavirus")
```

Or, install the Github version (v.0.1.0.9000):

``` r
# install.packages("devtools")
devtools::install_github("RamiKrispin/coronavirus")
```

The CRAN version (v0.1.0) is update up to Feb 16, 2020, where the Github version (v.0.1.0.9000) is update on a daily bases. In this post I will use the Github version.


### The coronavirus dataset

The `coronavirus` dataset contains the following fields:

* `date` - The date of the summary
* `Province.State` - The province or state, when applicable
* `Country.Region` - The country or region name
* `Lat` - Latitude point
* `Long`- Longitude point
* `cases` - the number of daily cases (corresponding to the case type)
* `type` - the type of case (i.e., confirmed, death, and recovered)


We can use the `head` and `str` functions to see the structure of the dataset:

```{r}
library(coronavirus)

data("coronavirus")
```


```{r}
str(coronavirus)

head(coronavirus)
```

#### Summarize the data

In the examples below, we will use the **dplyr** and **tidyr** packages to answer the following questions:

* Countries with the highest number of confirmed cases
* Mortality and recovery rates 
* Distribution of new cases during the most recent day 

#### Top affected countries

The first example demonstrates how to aggregate the data by country and case type, and display the countries with the highest number of confirmed cases:

```{r }
library(dplyr)
library(tidyr)


country_view <- coronavirus %>% 
  group_by(Country.Region, type) %>%
  summarise(total = sum(cases, na.rm = TRUE)) %>% 
  pivot_wider(names_from = type,
              values_from = total) %>%
  select(country = Country.Region, confirmed, recovered, death) %>%
  arrange(-confirmed)


# View the top 20 countries
country_view %>% head(20)
  
  
```

#### Recovery and mortality rates

Using the above cases summary by country, we can derive the recovery and mortality rates, where:

