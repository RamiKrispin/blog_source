---
title: Introduction to the coronavirus package
author: Rami Krispin
date: '2020-03-08'
slug: introduction-to-the-coronavirus-package
categories: []
tags: ["coronavirus", "covid19", "R", "timeseries", "dataset"]
keywords:
  - coronavirus
---



<p>The <a href="https://ramikrispin.github.io/coronavirus/">coronavirus</a> R dataset package provides a daily summary for the Coronavirus new cases by geographic location (i.e., country and province/state when applicable), and case type (confirmed, recovered, and death). The raw data pulled from the Johns Hopkins University Center for Systems Science and Engineering (JHU CCSE) Coronavirus <a href="https://github.com/CSSEGISandData/COVID-19">repository</a>.</p>
<p><strong>Note:</strong> More granular data for the main countries affected by the virus (South Korea, Italy, Iran, etc.) will add to the package in the coming days.</p>
<div id="installation" class="section level3">
<h3>Installation</h3>
<p>You can install the CRAN version (v0.1.0):</p>
<pre class="r"><code>install.packages(&quot;coronavirus&quot;)</code></pre>
<p>Or, install the Github version (v.0.1.0.9000):</p>
<pre class="r"><code># install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;RamiKrispin/coronavirus&quot;)</code></pre>
<p>The CRAN version (v0.1.0) is update up to Feb 16, 2020, where the Github version (v.0.1.0.9000) is update on a daily bases. In this post I will use the Github version.</p>
</div>
<div id="the-coronavirus-dataset" class="section level3">
<h3>The coronavirus dataset</h3>
<p>The <code>coronavirus</code> dataset contains the following fields:</p>
<ul>
<li><code>date</code> - The date of the summary</li>
<li><code>Province.State</code> - The province or state, when applicable</li>
<li><code>Country.Region</code> - The country or region name</li>
<li><code>Lat</code> - Latitude point</li>
<li><code>Long</code>- Longitude point</li>
<li><code>cases</code> - the number of daily cases (corresponding to the case type)</li>
<li><code>type</code> - the type of case (i.e., confirmed, death, and recovered)</li>
</ul>
<p>We can use the <code>head</code> and <code>str</code> functions to see the structure of the dataset:</p>
<pre class="r"><code>library(coronavirus)

data(&quot;coronavirus&quot;)</code></pre>
<pre class="r"><code>str(coronavirus)</code></pre>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    3152 obs. of  7 variables:
##  $ Province.State: chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;Anhui&quot; ...
##  $ Country.Region: chr  &quot;Japan&quot; &quot;South Korea&quot; &quot;Thailand&quot; &quot;Mainland China&quot; ...
##  $ Lat           : num  36 36 15 31.8 40.2 ...
##  $ Long          : num  138 128 101 117 116 ...
##  $ date          : Date, format: &quot;2020-01-22&quot; &quot;2020-01-22&quot; &quot;2020-01-22&quot; &quot;2020-01-22&quot; ...
##  $ cases         : int  2 1 2 1 14 6 1 26 2 1 ...
##  $ type          : chr  &quot;confirmed&quot; &quot;confirmed&quot; &quot;confirmed&quot; &quot;confirmed&quot; ...</code></pre>
<pre class="r"><code>head(coronavirus)</code></pre>
<pre><code>##   Province.State Country.Region     Lat     Long       date cases      type
## 1                         Japan 36.0000 138.0000 2020-01-22     2 confirmed
## 2                   South Korea 36.0000 128.0000 2020-01-22     1 confirmed
## 3                      Thailand 15.0000 101.0000 2020-01-22     2 confirmed
## 4          Anhui Mainland China 31.8257 117.2264 2020-01-22     1 confirmed
## 5        Beijing Mainland China 40.1824 116.4142 2020-01-22    14 confirmed
## 6      Chongqing Mainland China 30.0572 107.8740 2020-01-22     6 confirmed</code></pre>
<div id="summarize-the-data" class="section level4">
<h4>Summarize the data</h4>
<p>In the examples below, we will use the <strong>dplyr</strong> and <strong>tidyr</strong> packages to answer the following questions:</p>
<ul>
<li>Countries with the highest number of confirmed cases</li>
<li>Mortality and recovery rates</li>
<li>Distribution of new cases during the most recent day</li>
</ul>
</div>
<div id="top-affected-countries" class="section level4">
<h4>Top affected countries</h4>
<p>The first example demonstrates how to aggregate the data by country and case type, and display the countries with the highest number of confirmed cases:</p>
<pre class="r"><code>library(dplyr)
library(tidyr)


country_view &lt;- coronavirus %&gt;% 
  group_by(Country.Region, type) %&gt;%
  summarise(total = sum(cases, na.rm = TRUE)) %&gt;% 
  pivot_wider(names_from = type,
              values_from = total) %&gt;%
  select(country = Country.Region, confirmed, recovered, death) %&gt;%
  arrange(-confirmed)


# View the top 20 countries
country_view %&gt;% head(20)</code></pre>
<pre><code>## # A tibble: 20 x 4
## # Groups:   country [20]
##    country        confirmed recovered death
##    &lt;chr&gt;              &lt;int&gt;     &lt;int&gt; &lt;int&gt;
##  1 Mainland China     80652     55478  3070
##  2 South Korea         7041       135    44
##  3 Italy               5883       589   233
##  4 Iran                5823      1669   145
##  5 France               949        12    11
##  6 Germany              799        18    NA
##  7 Others               696        40     6
##  8 Spain                500        30    10
##  9 Japan                461        76     6
## 10 US                   417         8    17
## 11 Switzerland          268         3     1
## 12 UK                   206        18     2
## 13 Netherlands          188        NA     1
## 14 Belgium              169         1    NA
## 15 Sweden               161        NA    NA
## 16 Norway               147        NA    NA
## 17 Singapore            138        78    NA
## 18 Hong Kong            108        51     2
## 19 Malaysia              93        23    NA
## 20 Bahrain               85         4    NA</code></pre>
</div>
<div id="recovery-and-mortality-rates" class="section level4">
<h4>Recovery and mortality rates</h4>
<p>Using the above cases summary by country, we can derive the recovery and mortality rates, where:</p>
</div>
</div>
